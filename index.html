<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IA1 - T1 _ 201612174</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            margin: 0;
            padding: 20px;
            background-color: #1e1e1e;
            color: #f0f0f0;
        }

        h1 {
            text-align: center;
            color: #00BFFF;
            margin: 10px 0;
        }

        .code-container {
            background-color: #2d2d2d;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            overflow-x: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
            line-height: 1.5;
        }

        .line-number {
            display: inline-block;
            width: 30px;
            color: #888;
            user-select: none;
        }

        .code {
            display: inline-block;
            color: #f0f0f0;
        }

        /* Syntax highlighting */
        .keyword { color: #FF79C6; }
        .function { color: #50FA7B; }
        .comment { color: #6272A4; }
        .string { color: #F1FA8C; }
        .type { color: #8BE9FD; }
        .number { color: #BD93F9; }
    </style>
</head>
<body>
    <h1>Simulaci√≥n de Aspiradora Inteligente</h1>
    <h1>IA1 - T1 _ 201612174</h1>
    <div class="code-container">
        <pre>
            <code class="line-number">1  </code><code class="keyword">import</code> time
            <code class="line-number">2  </code><code class="keyword">import</code> random
            <code class="line-number">3  </code><code class="keyword">from</code> typing <code class="keyword">import</code> Dict, List, Tuple
            <code class="line-number">4  </code>
            <code class="line-number">5  </code>State = Tuple[<code class="type">str</code>, <code class="type">str</code>, <code class="type">str</code>]
            <code class="line-number">6  </code>StateInfo = List[<code class="type">int</code>]
            <code class="line-number">7  </code>possible_states: Dict[State, StateInfo] = {
            <code class="line-number">8  </code>    (<code class="string">'A'</code>, <code class="string">'DIRTY'</code>, <code class="string">'DIRTY'</code>): [<code class="number">1</code>, <code class="number">0</code>],
            <code class="line-number">9  </code>    (<code class="string">'B'</code>, <code class="string">'DIRTY'</code>, <code class="string">'DIRTY'</code>): [<code class="number">2</code>, <code class="number">0</code>],
            <code class="line-number">10 </code>    (<code class="string">'A'</code>, <code class="string">'DIRTY'</code>, <code class="string">'CLEAN'</code>): [<code class="number">3</code>, <code class="number">0</code>],
            <code class="line-number">11 </code>    (<code class="string">'B'</code>, <code class="string">'DIRTY'</code>, <code class="string">'CLEAN'</code>): [<code class="number">4</code>, <code class="number">0</code>],
            <code class="line-number">12 </code>    (<code class="string">'A'</code>, <code class="string">'CLEAN'</code>, <code class="string">'DIRTY'</code>): [<code class="number">5</code>, <code class="number">0</code>],
            <code class="line-number">13 </code>    (<code class="string">'B'</code>, <code class="string">'CLEAN'</code>, <code class="string">'DIRTY'</code>): [<code class="number">6</code>, <code class="number">0</code>],
            <code class="line-number">14 </code>    (<code class="string">'A'</code>, <code class="string">'CLEAN'</code>, <code class="string">'CLEAN'</code>): [<code class="number">7</code>, <code class="number">0</code>],
            <code class="line-number">15 </code>    (<code class="string">'B'</code>, <code class="string">'CLEAN'</code>, <code class="string">'CLEAN'</code>): [<code class="number">8</code>, <code class="number">0</code>]
            <code class="line-number">16 </code>}
            <code class="line-number">17 </code>
            <code class="line-number">18 </code><code class="keyword">def</code> all_states_visited() -> <code class="type">bool</code>:
            <code class="line-number">19 </code>    <code class="comment">"""</code>
            <code class="line-number">20 </code>    <code class="comment">Checks if all states have been visited at least once.</code>
            <code class="line-number">21 </code>
            <code class="line-number">22 </code>    <code class="comment">Returns:</code>
            <code class="line-number">23 </code>        <code class="type">bool</code>: <code class="comment">True if all states have been visited, False otherwise.</code>
            <code class="line-number">24 </code>    <code class="comment">"""</code>
            <code class="line-number">25 </code>    <code class="keyword">return</code> all(values[<code class="number">1</code>] > <code class="number">0</code> <code class="keyword">for</code> values <code class="keyword">in</code> possible_states.values())
            <code class="line-number">26 </code>
            <code class="line-number">27 </code><code class="keyword">def</code> reflex_agent(location: <code class="type">str</code>, state: <code class="type">str</code>) -> <code class="type">str</code>:
            <code class="line-number">28 </code>    <code class="comment">"""</code>
            <code class="line-number">29 </code>    <code class="comment">Determines the agent's action based on its location and the room state.</code>
            <code class="line-number">30 </code>
            <code class="line-number">31 </code>    <code class="comment">Args:</code>
            <code class="line-number">32 </code>        location (<code class="type">str</code>): <code class="comment">The agent's current location ('A' or 'B').</code>
            <code class="line-number">33 </code>        state (<code class="type">str</code>): <code class="comment">The current room state ('DIRTY', 'CLEAN', or 'REVISIT').</code>
            <code class="line-number">34 </code>
            <code class="line-number">35 </code>    <code class="comment">Returns:</code>
            <code class="line-number">36 </code>        <code class="type">str</code>: <code class="comment">The action the agent should take ('CLEAN', 'RIGHT', 'LEFT').</code>
            <code class="line-number">37 </code>    <code class="comment">"""</code>
            <code class="line-number">38 </code>    <code class="keyword">if</code> state == <code class="string">"DIRTY"</code>:
            <code class="line-number">39 </code>        <code class="keyword">return</code> <code class="string">'CLEAN'</code>
            <code class="line-number">40 </code>    <code class="keyword">elif</code> state == <code class="string">"REVISIT"</code>:
            <code class="line-number">41 </code>        <code class="keyword">return</code> random.choice([<code class="string">'RIGHT'</code>, <code class="string">'LEFT'</code>])  <code class="comment"># Random action if revisiting</code>
            <code class="line-number">42 </code>    <code class="keyword">elif</code> location == <code class="string">'A'</code>:
            <code class="line-number">43 </code>        <code class="keyword">return</code> <code class="string">'RIGHT'</code>
            <code class="line-number">44 </code>    <code class="keyword">elif</code> location == <code class="string">'B'</code>:
            <code class="line-number">45 </code>        <code class="keyword">return</code> <code class="string">'LEFT'</code>
            <code class="line-number">46 </code>    <code class="keyword">return</code> <code class="string">''</code>
            <code class="line-number">47 </code>
            <code class="line-number">48 </code><code class="keyword">def</code> simulate_agent(states: List[<code class="type">str</code>]) -> <code class="type">None</code>:
            <code class="line-number">49 </code>    <code class="comment">"""</code>
            <code class="line-number">50 </code>    <code class="comment">Simulates the execution of the reflex agent until all states are visited.</code>
            <code class="line-number">51 </code>
            <code class="line-number">52 </code>    <code class="comment">Args:</code>
            <code class="line-number">53 </code>        states (List[<code class="type">str</code>]): <code class="comment">The initial state of the system [location, state_A, state_B].</code>
            <code class="line-number">54 </code>    <code class="comment">"""</code>
            <code class="line-number">55 </code>    <code class="keyword">while</code> <code class="type">True</code>:
            <code class="line-number">56 </code>        location = states[<code class="number">0</code>]
            <code class="line-number">57 </code>        room_state = states[<code class="number">1</code>] <code class="keyword">if</code> location == <code class="string">'A'</code> <code class="keyword">else</code> states[<code class="number">2</code>]
            <code class="line-number">58 </code>        state_info = possible_states[tuple(states)]
            <code class="line-number">59 </code>        current_state = state_info[<code class="number">0</code>]
            <code class="line-number">60 </code>
            <code class="line-number">61 </code>        <code class="keyword">if</code> state_info[<code class="number">1</code>] == <code class="number">0</code>:
            <code class="line-number">62 </code>            possible_states[tuple(states)][<code class="number">1</code>] += <code class="number">1</code>  <code class="comment"># Mark state as visited</code>
            <code class="line-number">63 </code>        <code class="keyword">else</code>:
            <code class="line-number">64 </code>            <code class="comment"># Randomly dirty a room if revisiting</code>
            <code class="line-number">65 </code>            room_to_dirty = random.choice([<code class="number">1</code>, <code class="number">2</code>])
            <code class="line-number">66 </code>            states[room_to_dirty] = <code class="string">'DIRTY'</code>
            <code class="line-number">67 </code>            action = reflex_agent(location, <code class="string">'REVISIT'</code>)
            <code class="line-number">68 </code>            <code class="keyword">print</code>(<code class="string">f"Location: {location} | Action: {action} | Current State: {current_state}"</code>)
            <code class="line-number">69 </code>            <code class="keyword">continue</code>
            <code class="line-number">70 </code>
            <code class="line-number">71 </code>        action = reflex_agent(location, room_state)
            <code class="line-number">72 </code>        <code class="keyword">print</code>(<code class="string">f"Location: {location} | Action: {action} | Current State: {current_state}"</code>)
            <code class="line-number">73 </code>
            <code class="line-number">74 </code>        <code class="keyword">if</code> action == <code class="string">"CLEAN"</code>:
            <code class="line-number">75 </code>            <code class="keyword">if</code> location == <code class="string">'A'</code>:
            <code class="line-number">76 </code>                states[<code class="number">1</code>] = <code class="string">"CLEAN"</code>
            <code class="line-number">77 </code>            <code class="keyword">elif</code> location == <code class="string">'B'</code>:
            <code class="line-number">78 </code>                states[<code class="number">2</code>] = <code class="string">"CLEAN"</code>
            <code class="line-number">79 </code>        <code class="keyword">elif</code> action == <code class="string">"RIGHT"</code>:
            <code class="line-number">80 </code>            states[<code class="number">0</code>] = <code class="string">'B'</code>
            <code class="line-number">81 </code>        <code class="keyword">elif</code> action == <code class="string">"LEFT"</code>:
            <code class="line-number">82 </code>            states[<code class="number">0</code>] = <code class="string">'A'</code>
            <code class="line-number">83 </code>
            <code class="line-number">84 </code>        <code class="keyword">if</code> all_states_visited():
            <code class="line-number">85 </code>            <code class="keyword">print</code>(<code class="string">"All states have been visited at least once."</code>)
            <code class="line-number">86 </code>            <code class="keyword">break</code>
            <code class="line-number">87 </code>
            <code class="line-number">88 </code>        time.sleep(<code class="number">3</code>)
            <code class="line-number">89 </code>
            <code class="line-number">90 </code><code class="comment"># Assume both rooms are dirty, and the vacuum is in room A. Start in state 1.</code>
            <code class="line-number">91 </code>simulate_agent([<code class="string">'A'</code>, <code class="string">'DIRTY'</code>, <code class="string">'DIRTY'</code>])
        </pre>
    </div>
</body>
</html>
